define("banjiajia/web/1.0.0/scripts/common/option",["$"],function(a,b,c){function d(a,b){this.keys=a,this.data=b,this.splitStr=";",this.SKUResult={}}a("$"),d.prototype={init:function(){var a,b,c=this,d=c.getObjKeys(c.data);for(a=0;a<d.length;a++){var e=d[a],f=c.data[e],g=e.split(c.splitStr);g.length;var h=c.arrayCombine(g);for(b=0;b<h.length;b++)c.add2SKUResult(h[b],f);c.SKUResult[e]={count:f.count,code:[f.skuCode],stock:[f.stock],prices:[f.price],images:[f.imgs]}}return c.SKUResult},getObjKeys:function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b},arrayCombine:function(a){if(!a||!a.length)return[];for(var b=this,c=a.length,d=[],e=1;c>e;e++)for(var f=b.getFlagArrs(c,e);f.length;){for(var g=f.shift(),h=[],i=0;c>i;i++)g[i]&&h.push(a[i]);d.push(h)}return d},getFlagArrs:function(a,b){if(!b||1>b)return[];var c,d,e,f=[],g=[],h=!1;for(c=0;a>c;c++)g[c]=b>c?1:0;for(f.push(g.concat());!h;)for(e=0,c=0;a-1>c;c++){if(1==g[c]&&0==g[c+1]){for(d=0;c>d;d++)g[d]=e>d?1:0;g[c]=0,g[c+1]=1;var i=g.concat();f.push(i),-1==i.slice(-b).join("").indexOf("0")&&(h=!0);break}1==g[c]&&e++}return f},add2SKUResult:function(a,b){var c=this,d=a.join(c.splitStr);c.SKUResult[d]?(c.SKUResult[d].count+=b.count,c.SKUResult[d].prices.push(b.price),c.SKUResult[d].images.push(b.imgs),c.SKUResult[d].code.push(b.skuCode),c.SKUResult[d].stock.push(b.stock)):c.SKUResult[d]={count:b.count,code:[b.skuCode],stock:[b.stock],prices:[b.price],images:[b.imgs]}}},c.exports=d});
