define("banjiajia/web/1.0.0/scripts/order/schedule/list",["$","pager","util","state","ace-elements","jggrid","gridlocale","baiduMap","validation","plugin"],function(a){function b(a){var b="";if(a){for(var d in a.data)b+=c(a.data[d]);m.html(b),f(".locationMap").click(function(){var a=f(this).attr("data-x"),b=f(this).attr("data-y"),c=f(this).attr("data-baby-add"),d=f(this).attr("data-name")+"于"+f(this).attr("data-t")+"在此"+f(this).attr("data-type"),e="宝宝:"+f(this).attr("data-baby-name")+"在此处",g={point:{lng:a,lat:b,txt:d},adds:{add:c,txt:e}};(new k).divtoshow(g,"",!0)}),f("#dataTotal").text("共检索出"+a.page.count+"条数据"),n=a.page.length;var h={totalPages:a.page.total,currentPage:a.page.current,callback:e};g.init(f(".pagination"),h)}}function c(a){var b="",c=a.orderServiceSchedule,d=a.orderDetailSign,e=a.orderAddress;return b+='<tr class="odd"><td class="">'+c.teacherName+"</td>"+'<td class=" ">'+c.userName+"</td>"+'<td class=" "><a href="'+_contentPath+"/order/detail/"+c.orderNo+'.html" target="_blank">'+c.orderNo+"</a></td>"+'<td class=" ">'+(d?j.getLocalTime(d.createTime/1e3):"")+"</td>"+'<td class=" ">'+(d?'<a href="javascript:void(0)" class="locationMap" data-type="签到" data-name="'+c.teacherName+'" data-t="'+(d?j.getLocalTime(d.createTime/1e3):"")+'"  data-x="'+d.locationX+'" data-y="'+d.locationY+'" data-baby-add="'+e.address+'" data-baby-name="'+e.babysNames+'">查看</a>':"")+"</td>"+'<td class=" ">'+(d?j.getLocalTime(d.signEndTime/1e3):"")+"</td>"+'<td class=" ">'+(d?'<a href="javascript:void(0)" class="locationMap" data-type="签退" data-name="'+c.teacherName+'" data-t="'+(d?j.getLocalTime(d.signEndTime/1e3):"")+'"  data-x="'+d.locationXOut+'" data-y="'+d.locationYOut+'" data-baby-add="'+e.address+'" data-baby-name="'+e.babysNames+'">查看</a>':"")+"</td>"+'<td class=" ">'+o.get(o.OrderProcessState(),c.state)+"</td>"+'<td class=" ">'+c.serviceStartTime+"</td>"+'<td class=" ">'+c.serviceEndTime+"</td>"+'<td class=" ">'+c.createTime+"</td>"+'<td class=" ">'+c.bak+"</td>"+"</tr>"}function d(){f("#serchBtn").click(function(){var a=f(this).attr("data-fild");p=new Array,p.push(a+"="+encodeURI(encodeURI(f("#searchValue").val()))),p.push("orderState="+f("#stateDropDown").attr("data-chk")),e(null,null,null,1)})}function e(a,c,d,e){var g=(parseInt(e)-1)*n;f.ajax({url:_contentPath+"/order/schedule/list/query.json?begin="+g+"&"+p.join("&"),async:!0,dataType:"json",success:function(a){b(a.orderServiceSchedules)},error:function(a,b,c){console.log("error="+c)}})}var f=a("$"),g=a("pager"),h=a("util"),i=a("state"),j=new h;a("ace-elements"),a("jggrid"),a("gridlocale");var k=a("baiduMap");a("validation")(f);var l=a("plugin"),m=f("#theacertbody"),n=0,o=new i;o.init(_contentPath+"/system/config/get/order_detail_state.json");var p=new Array,q={init:function(){j.ajaxGlobalSetting(),e(null,null,null,0),d();var a=(new l).bootstrap();a.dropdownInIt(),a.dropDownAlone()}};q.init()});
